import{ac as v,r as h,cq as S,cr as y,cs as b,ct as A,cu as L,j as s,Y as I,a9 as N,B as T}from"./app-BMCNW8jw.js";import{A as z}from"./AuthenticatedLayout-zgmGGxiw.js";import{B as E}from"./BookList-U5NfsT0B.js";import{b as c,c as D,d as P,y as H,P as $}from"./FooterLayout-Bsjv7eYk.js";import{u as q}from"./useDebounce-C4Tdgskq.js";import{I as Y}from"./index-BDE-1FUJ.js";import{F as G}from"./ApplicationLogo-Cg6DUfms.js";import{R as J}from"./PlusOutlined-BO4X4D1A.js";import{F as K}from"./index-V_S9f0iW.js";import"./index-8ViR2Fpo.js";import"./index-BPH_3ySU.js";import"./EyeOutlined-DSXNn0z0.js";import"./addEventListener-CYrrB4rT.js";import"./scrollTo-BbMOu6OJ.js";const M=({flash:p})=>{const{message:u}=v.useApp(),a=c(e=>e.writerReducer.isFetch),m=c(e=>e.writerReducer.isLoading),d=c(e=>e.writerReducer.isFlash),n=c(e=>e.writerReducer.error),o=c(e=>e.writerReducer.pagination),t=c(e=>e.writerReducer.pagination.page),i=c(e=>e.writerReducer.pages),r=c(e=>e.writerReducer.filters.title),l=D(),g=P(r),x=P(t),F=x!==t&&x!==void 0,j=g!==r&&g!==void 0,C=!(i!=null&&i[t]);h.useEffect(()=>{p==="refetch"&&!d?(u.success("Success"),f({page:t,title:r}),l(S(!0))):a?F&&C?f({page:t,title:r}):j&&t!==1?w(1):j&&t===1&&f({page:t,title:r}):f({page:t,title:r})},[t,r]);const R=h.useCallback(e=>{l(y({title:e}))},[]),k=h.useCallback(e=>{l(b({page:e}))},[]),w=h.useCallback(e=>{l(A({page:e}))},[]),f=async e=>await l(L(e)),B=(i==null?void 0:i[o==null?void 0:o.page])||[],W=(o==null?void 0:o.lastPage)||1;return{list:B,lastPage:W,pagination:o,page:t,title:r,isFetch:a,isLoading:m,error:n,refetch:f,setWriterPage:k,setWriterFilterTitle:R}},O=({onChangeText:p,defaultValue:u})=>{const[a,m]=h.useState(u);q(()=>{p&&p(a)},1e3,[a]);const d=({currentTarget:n})=>{m((n==null?void 0:n.value)||"")};return s.jsx(Y,{placeholder:"Writer Search",allowClear:!0,prefix:s.jsx(H,{}),size:"large",variant:"filled",onChange:d,defaultValue:u})},Q=O;function pe(p){const{flash:u}=p,{pagination:a,page:m,list:d,isLoading:n,title:o,setWriterPage:t,setWriterFilterTitle:i}=M({flash:u.message}),r=l=>{t(l)};return s.jsxs(z,{header:s.jsx(Q,{defaultValue:o,onChangeText:i}),children:[s.jsx(I,{title:"Book List"}),s.jsx("div",{className:"py-12",children:s.jsxs("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8",children:[s.jsxs(G,{justify:"end",gap:"small",className:"my-4",children:[a.total?s.jsx($,{current:m,onChange:r,total:a.total,defaultPageSize:a.pageSize,align:"end"}):null,s.jsx(N,{href:route("books.create"),children:s.jsx(T,{type:"primary",icon:s.jsx(J,{}),children:"Create"})})]}),s.jsx(E,{isLoading:n,list:d}),s.jsx(K.BackTop,{})]})})]})}export{pe as default};
