import{r as a,y as z,G as A,bj as M,T as B,H as D,U as V,w as $,cp as k,W as F,j as t,aC as P}from"./app-Dg8HGri5.js";import{q as C,ad as T,l as j,m as U,e as R,p as W,r as I,T as G}from"./LayoutBreadcrumb-FYt7O-h6.js";import{a as H,d as q}from"./laravelBlade-DnAXOTAM.js";import{u as K}from"./useDebounce-Cal2jPBj.js";import{I as b}from"./index-BE15Rycn.js";import{F as O}from"./ApplicationLogo-CaO9lwQU.js";import{I as X}from"./index-Bz-I84Jn.js";import{R as Y}from"./HeartFilled-B0LYFnLF.js";const{Option:N}=C;function E(e){return(e==null?void 0:e.type)&&(e.type.isSelectOption||e.type.isSelectOptGroup)}const Z=(e,i)=>{var o;const{prefixCls:f,className:m,popupClassName:l,dropdownClassName:s,children:n,dataSource:w}=e,u=z(n);let x;u.length===1&&a.isValidElement(u[0])&&!E(u[0])&&([x]=u);const c=x?()=>x:void 0;let p;u.length&&E(u[0])?p=n:p=w?w.map(r=>{if(a.isValidElement(r))return r;switch(typeof r){case"string":return a.createElement(N,{key:r,value:r},r);case"object":{const{value:y}=r;return a.createElement(N,{key:y,value:y},r.text)}default:return}}):[];const{getPrefixCls:g}=a.useContext(A),h=g("select",f),[S]=M("SelectLike",(o=e.dropdownStyle)===null||o===void 0?void 0:o.zIndex);return a.createElement(C,Object.assign({ref:i,suffixIcon:null},B(e,["dataSource","dropdownClassName"]),{prefixCls:h,popupClassName:l||s,dropdownStyle:Object.assign(Object.assign({},e.dropdownStyle),{zIndex:S}),className:D(`${h}-auto-complete`,m),mode:C.SECRET_COMBOBOX_MODE_DO_NOT_USE,getInputElement:c}),p)},v=a.forwardRef(Z),J=T(v);v.Option=N;v._InternalPanelDoNotUseOrYouWillBeFired=J;var Q={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M869 487.8L491.2 159.9c-2.9-2.5-6.6-3.9-10.5-3.9h-88.5c-7.4 0-10.8 9.2-5.2 14l350.2 304H152c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h585.1L386.9 854c-5.6 4.9-2.2 14 5.2 14h91.5c1.9 0 3.8-.7 5.2-2L869 536.2a32.07 32.07 0 000-48.4z"}}]},name:"arrow-right",theme:"outlined"},ee=function(i,o){return a.createElement(V,$({},i,{ref:o,icon:Q}))},te=a.forwardRef(ee);const se=()=>{const e=j(s=>s.searchReducer.data),i=j(s=>s.searchReducer.isFetch),o=j(s=>s.searchReducer.isLoading),f=j(s=>s.searchReducer.error),m=U(),l=a.useCallback(async s=>await m(k(s)),[]);return{data:e,isFetch:i,isLoading:o,error:f,refetch:l}},{Text:ae}=G,_=e=>t.jsxs(O,{align:"center",justify:"space-between",children:[e.title,t.jsx(P,{href:route("search",e.keyword||""),children:t.jsx(te,{})})]}),L=e=>({value:e.title,label:t.jsx(P,{href:route("search",e.title||""),children:t.jsxs(O,{className:"p-2 mr-6",style:{borderRadius:5},children:[t.jsx("div",{style:{width:60},children:t.jsx(X,{src:H(`storage/${e.img_url}`),preview:!1,fallback:q,style:{width:60,borderRadius:5},className:"justify-start"})}),t.jsxs(O,{className:"py-1 px-4",wrap:!0,children:[t.jsx(ae,{style:{width:300},ellipsis:!0,className:"font-bold",children:e.title}),e.active_followings_count?t.jsx(I,{style:{height:22},icon:t.jsx(Y,{}),color:"error",children:e.active_followings_count||""}):null,t.jsx(I,{style:{height:22},color:"success",children:"Published"})]})]})})}),oe={size:"middle",defaultValue:""},re=e=>{const i={...oe,...e},{size:o,defaultValue:f,isMenu:m}=i,[l,s]=a.useState(""),[n,w]=a.useState("");K(()=>{l&&x({keyword:l}),w(l)},1e3,[l]),F();const{isLoading:u,refetch:x,data:c}=se(),p=({currentTarget:d})=>{s((d==null?void 0:d.value)||"")},g=(c==null?void 0:c.Manga)||[],h=(c==null?void 0:c.Novel)||[],S=g.length?[{label:t.jsx(_,{title:"Manga List",keyword:n}),options:g.map(d=>L(d))}]:[],r=h.length?[{label:t.jsx(_,{title:"Novel List",keyword:n}),options:h.map(d=>L(d))}]:[],y=a.useMemo(()=>n?[...S,...r]:[],[g,h,n]);return t.jsx("div",{className:"my-auto",children:m?t.jsx(v,{popupClassName:"certain-category-search-dropdown",popupMatchSelectWidth:480,style:{width:240},options:y,size:"large",children:t.jsx(b,{placeholder:"Search",allowClear:!0,prefix:t.jsx(R,{}),size:o,variant:"filled",onChange:p})}):t.jsx(W.Compact,{children:t.jsx(b,{placeholder:"Search",allowClear:!0,prefix:t.jsx(R,{}),size:o,variant:"filled",onChange:p,defaultValue:f})})})},fe=re;export{fe as S,se as u};
