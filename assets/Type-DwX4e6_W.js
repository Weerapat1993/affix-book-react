import{r as p,U as N,w as S,aI as T,aJ as E,aK as H,aL as O,aM as $,j as a,B as D}from"./app-DV9NRXND.js";import{A as z}from"./AuthenticatedLayout-BH7Oq1bE.js";import{B as J}from"./BookList-MgNW8Zr7.js";import{l as d,m as K,n as k,u as U,T as W}from"./FooterLayout-BQyBW5O-.js";import{C as _}from"./CategoryFilter-CfLWQ9B3.js";import{d as B}from"./seo-Bktiihya.js";import{a as q,F as G}from"./ApplicationLogo-BttutHq_.js";import{S as Q}from"./SeoHead-eDWkpP8m.js";import{C as V}from"./card-Bm05RnMj.js";import{C as X}from"./index-DYFJxuvL.js";import{F as Y}from"./index-D1J4Or1S.js";/* empty css            */import"./index-B3DRfpBm.js";import"./EyeOutlined-g2T2rbd4.js";import"./addEventListener-BXzlr4Dd.js";import"./PlusOutlined-B8Fa1fb7.js";import"./scrollTo-DNHynvGF.js";var Z={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M909.1 209.3l-56.4 44.1C775.8 155.1 656.2 92 521.9 92 290 92 102.3 279.5 102 511.5 101.7 743.7 289.8 932 521.9 932c181.3 0 335.8-115 394.6-276.1 1.5-4.2-.7-8.9-4.9-10.3l-56.7-19.5a8 8 0 00-10.1 4.8c-1.8 5-3.8 10-5.9 14.9-17.3 41-42.1 77.8-73.7 109.4A344.77 344.77 0 01655.9 829c-42.3 17.9-87.4 27-133.8 27-46.5 0-91.5-9.1-133.8-27A341.5 341.5 0 01279 755.2a342.16 342.16 0 01-73.7-109.4c-17.9-42.4-27-87.4-27-133.9s9.1-91.5 27-133.9c17.3-41 42.1-77.8 73.7-109.4 31.6-31.6 68.4-56.4 109.3-73.8 42.3-17.9 87.4-27 133.8-27 46.5 0 91.5 9.1 133.8 27a341.5 341.5 0 01109.3 73.8c9.9 9.9 19.2 20.4 27.8 31.4l-60.2 47a8 8 0 003 14.1l175.6 43c5 1.2 9.9-2.6 9.9-7.7l.8-180.9c-.1-6.6-7.8-10.3-13-6.2z"}}]},name:"reload",theme:"outlined"},ee=function(g,n){return p.createElement(N,S({},g,{ref:n,icon:Z}))},se=p.forwardRef(ee);const oe=({key:t,flash:g})=>{const{message:n}=T.useApp(),b=d(e=>{var o,s;return(s=(o=e.bookReducer.keys)==null?void 0:o[t])==null?void 0:s.isLoading}),x=d(e=>{var o,s;return(s=(o=e.bookReducer.keys)==null?void 0:o[t])==null?void 0:s.isFetch}),y=d(e=>{var o,s;return(s=(o=e.bookReducer.keys)==null?void 0:o[t])==null?void 0:s.error}),i=d(e=>{var o,s;return(s=(o=e.bookReducer.keys)==null?void 0:o[t])==null?void 0:s.filters.categoryIds}),c=d(e=>{var o,s;return(s=(o=e.bookReducer.keys)==null?void 0:o[t])==null?void 0:s.pagination}),l=d(e=>{var o,s;return(s=(o=e.bookReducer.keys)==null?void 0:o[t])==null?void 0:s.pages}),r=d(e=>{var o,s;return(s=(o=e.bookReducer.keys)==null?void 0:o[t])==null?void 0:s.pagination.page}),m=K(),u=(i||[]).toString(),h=k(r),C=k(u),j=p.useMemo(()=>{let e=[];const o=(c==null?void 0:c.page)||1;for(let s=0;s<o;s++){const M=(l==null?void 0:l[s+1])||[];e=[...e,...M]}return e},[l]),P=h!==r&&h!==void 0,v=C!==u&&C!==void 0,R=!(l!=null&&l[r]);p.useEffect(()=>{g==="refetch"?(n.success("Success"),f({key:t,categoryIds:i,page:r||1})):x?P&&R?f({key:t,categoryIds:i,page:r||1}):v&&r!==1?F(1):v&&r===1&&f({key:t,categoryIds:i,page:r}):f({key:t,categoryIds:i,page:r||1})},[t,r,u,g]);const f=async e=>await m(E(e)),w=p.useCallback(e=>{m(H({key:t,categoryIds:e}))},[t]),L=p.useCallback(e=>{m(O({key:t,page:e}))},[t]),F=p.useCallback(e=>{m($({key:t,page:e}))},[t]),I=j||[],A=(c==null?void 0:c.lastPage)||1;return{page:r,isLoading:b,isFetch:x,list:I,error:y,pagination:c,refetch:f,categoryIds:i||[],lastPage:A,setBookPage:L,setBookFilterCategory:w}},te={currentPage:1,pageSize:12,total:0};function be(t){const g={...te,...t},{title:n,categories:b,type:x,flash:y}=g;U();const{list:i,isLoading:c,lastPage:l,page:r,setBookPage:m,categoryIds:u,setBookFilterCategory:h}=oe({key:x,flash:y.message}),C=()=>{m(r+1)},j=r>=l,P={title:`${n} - ${B.title}`,description:B.description,keywords:["Book","Manga","Novel","Comic","Oneshot"],author:"",canonical:q(route("books.manga"))},v=[{key:1,title:"Home",href:route("home")},{key:2,title:n,isLast:!0}];return a.jsxs(z,{breadcrumbs:v,children:[a.jsx(Q,{meta:P}),a.jsx("div",{className:"pt-4 pb-12",children:a.jsxs("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8",children:[a.jsx(W.Title,{level:3,children:n}),a.jsxs("div",{className:"flex flex-wrap lg:flex-nowrap flex-row-reverse gap-4",children:[a.jsx("div",{className:"flex flex-col flex-none lg:w-64 w-full",children:a.jsx(V,{children:a.jsx(_,{value:u,list:b,onChange:h})})}),a.jsx("div",{className:"flex flex-col flex-auto",children:a.jsxs(X,{children:[a.jsx(J,{list:i}),j?null:a.jsx(G,{className:"my-4",justify:"center",gap:"small",children:a.jsx(D,{type:"primary",onClick:C,icon:a.jsx(se,{}),loading:c,disabled:j,children:"Load More"})})]})})]}),a.jsx(Y.BackTop,{})]})})]})}export{be as default};
