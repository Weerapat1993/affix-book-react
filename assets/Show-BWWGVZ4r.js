import{r as o,G as Z,H as P,I as xe,J as be,N as ye,L as q,ax as $e,ab as Se,ae as F,F as we,j as u}from"./app-BuAjSH8i.js";import{a as Le,b as je}from"./laravelBlade-DnAXOTAM.js";import{F as Ee,G as Y,S as Be}from"./LayoutBreadcrumb-BLvKFZBi.js";import{I as Ne}from"./index-CrsVFHyb.js";import{F as Pe}from"./ApplicationLogo-DKeDfmxM.js";import{e as Ie}from"./index-pTK18D2Z.js";import{g as Te,s as Ae}from"./scrollTo-DnXBxGCL.js";import{A as ze}from"./index-BNuhqnJI.js";import{M as Oe}from"./MangaLayout-Dj_w90TC.js";import{d as _e}from"./seo-Bktiihya.js";import{S as Re}from"./SeoHead-CfI86V8c.js";import{a as Me}from"./case-BgEqlyX4.js";import{F as He}from"./index-C9TMf0DF.js";/* empty css            */import"./createLucideIcon-CnwCtmzH.js";import"./EyeOutlined-q3Vz-553.js";import"./addEventListener-DRFOP12V.js";import"./index-BKNjMPK8.js";import"./index.es-BNIkzEIh.js";import"./DeleteOutlined-Bqt9q-JB.js";import"./index-CqxG1YX9.js";const ee=o.createContext(void 0),te=t=>{const{href:e,title:i,prefixCls:c,children:a,className:r,target:l,replace:p}=t,k=o.useContext(ee),{registerLink:v,unregisterLink:C,scrollTo:d,onClick:$,activeLink:x,direction:I}=k||{};o.useEffect(()=>(v==null||v(e),()=>{C==null||C(e)}),[e]);const j=b=>{$==null||$(b,{title:i,href:e}),d==null||d(e),p&&(b.preventDefault(),window.location.replace(e))},{getPrefixCls:E}=o.useContext(Z),g=E("anchor",c),T=x===e,w=P(`${g}-link`,r,{[`${g}-link-active`]:T}),A=P(`${g}-link-title`,{[`${g}-link-title-active`]:T});return o.createElement("div",{className:w},o.createElement("a",{className:A,href:e,title:typeof i=="string"?i:"",target:l,onClick:j},i),I!=="horizontal"?a:null)},De=t=>{const{componentCls:e,holderOffsetBlock:i,motionDurationSlow:c,lineWidthBold:a,colorPrimary:r,lineType:l,colorSplit:p,calc:k}=t;return{[`${e}-wrapper`]:{marginBlockStart:k(i).mul(-1).equal(),paddingBlockStart:i,[e]:Object.assign(Object.assign({},ye(t)),{position:"relative",paddingInlineStart:a,[`${e}-link`]:{paddingBlock:t.linkPaddingBlock,paddingInline:`${q(t.linkPaddingInlineStart)} 0`,"&-title":Object.assign(Object.assign({},$e),{position:"relative",display:"block",marginBlockEnd:t.anchorTitleBlock,color:t.colorText,transition:`all ${t.motionDurationSlow}`,"&:only-child":{marginBlockEnd:0}}),[`&-active > ${e}-link-title`]:{color:t.colorPrimary},[`${e}-link`]:{paddingBlock:t.anchorPaddingBlockSecondary}}}),[`&:not(${e}-wrapper-horizontal)`]:{[e]:{"&::before":{position:"absolute",insetInlineStart:0,top:0,height:"100%",borderInlineStart:`${q(a)} ${l} ${p}`,content:'" "'},[`${e}-ink`]:{position:"absolute",insetInlineStart:0,display:"none",transform:"translateY(-50%)",transition:`top ${c} ease-in-out`,width:a,backgroundColor:r,[`&${e}-ink-visible`]:{display:"inline-block"}}}},[`${e}-fixed ${e}-ink ${e}-ink`]:{display:"none"}}}},Fe=t=>{const{componentCls:e,motionDurationSlow:i,lineWidthBold:c,colorPrimary:a}=t;return{[`${e}-wrapper-horizontal`]:{position:"relative","&::before":{position:"absolute",left:{_skip_check_:!0,value:0},right:{_skip_check_:!0,value:0},bottom:0,borderBottom:`${q(t.lineWidth)} ${t.lineType} ${t.colorSplit}`,content:'" "'},[e]:{overflowX:"scroll",position:"relative",display:"flex",scrollbarWidth:"none","&::-webkit-scrollbar":{display:"none"},[`${e}-link:first-of-type`]:{paddingInline:0},[`${e}-ink`]:{position:"absolute",bottom:0,transition:`left ${i} ease-in-out, width ${i} ease-in-out`,height:c,backgroundColor:a}}}}},qe=t=>({linkPaddingBlock:t.paddingXXS,linkPaddingInlineStart:t.padding}),We=xe("Anchor",t=>{const{fontSize:e,fontSizeLG:i,paddingXXS:c,calc:a}=t,r=be(t,{holderOffsetBlock:c,anchorPaddingBlockSecondary:a(c).div(2).equal(),anchorTitleBlock:a(e).div(14).mul(3).equal(),anchorBallSize:a(i).div(2).equal()});return[De(r),Fe(r)]},qe);function Xe(){return window}function K(t,e){if(!t.getClientRects().length)return 0;const i=t.getBoundingClientRect();return i.width||i.height?e===window?i.top-t.ownerDocument.documentElement.clientTop:i.top-e.getBoundingClientRect().top:i.top}const Q=/#([\S ]+)$/,Ve=t=>{var e;const{rootClassName:i,prefixCls:c,className:a,style:r,offsetTop:l,affix:p=!0,showInkInFixed:k=!1,children:v,items:C,direction:d="vertical",bounds:$,targetOffset:x,onClick:I,onChange:j,getContainer:E,getCurrentAnchor:g,replace:T}=t,[w,A]=o.useState([]),[b,oe]=o.useState(null),z=o.useRef(b),W=o.useRef(null),O=o.useRef(null),_=o.useRef(!1),{direction:ie,anchor:L,getTargetContainer:re,getPrefixCls:se}=o.useContext(Z),h=se("anchor",c),X=Se(h),[ae,le,ce]=We(h,X),B=(e=E??re)!==null&&e!==void 0?e:Xe,R=JSON.stringify(w),de=F(n=>{w.includes(n)||A(s=>[].concat(we(s),[n]))}),ue=F(n=>{w.includes(n)&&A(s=>s.filter(m=>m!==n))}),pe=()=>{var n;const s=(n=W.current)===null||n===void 0?void 0:n.querySelector(`.${h}-link-title-active`);if(s&&O.current){const{style:m}=O.current,f=d==="horizontal";m.top=f?"":`${s.offsetTop+s.clientHeight/2}px`,m.height=f?"":`${s.clientHeight}px`,m.left=f?`${s.offsetLeft}px`:"",m.width=f?`${s.clientWidth}px`:"",f&&Ie(s,{scrollMode:"if-needed",block:"nearest"})}},fe=function(n){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,m=arguments.length>2&&arguments[2]!==void 0?arguments[2]:5;const f=[],D=B();return n.forEach(S=>{const y=Q.exec(S==null?void 0:S.toString());if(!y)return;const N=document.getElementById(y[1]);if(N){const U=K(N,D);U<=s+m&&f.push({link:S,top:U})}}),f.length?f.reduce((y,N)=>N.top>y.top?N:y).link:""},M=F(n=>{if(z.current===n)return;const s=typeof g=="function"?g(n):n;oe(s),z.current=s,j==null||j(n)}),H=o.useCallback(()=>{if(_.current)return;const n=fe(w,x!==void 0?x:l||0,$);M(n)},[R,x,l]),V=o.useCallback(n=>{M(n);const s=Q.exec(n);if(!s)return;const m=document.getElementById(s[1]);if(!m)return;const f=B(),D=Te(f),S=K(m,f);let y=D+S;y-=x!==void 0?x:l||0,_.current=!0,Ae(y,{getContainer:B,callback(){_.current=!1}})},[x,l]),ge=P(le,ce,X,i,`${h}-wrapper`,{[`${h}-wrapper-horizontal`]:d==="horizontal",[`${h}-rtl`]:ie==="rtl"},a,L==null?void 0:L.className),me=P(h,{[`${h}-fixed`]:!p&&!k}),he=P(`${h}-ink`,{[`${h}-ink-visible`]:b}),ke=Object.assign(Object.assign({maxHeight:l?`calc(100vh - ${l}px)`:"100vh"},L==null?void 0:L.style),r),G=n=>Array.isArray(n)?n.map(s=>o.createElement(te,Object.assign({replace:T},s,{key:s.key}),d==="vertical"&&G(s.children))):null,J=o.createElement("div",{ref:W,className:ge,style:ke},o.createElement("div",{className:me},o.createElement("span",{className:he,ref:O}),"items"in t?G(C):v));o.useEffect(()=>{const n=B();return H(),n==null||n.addEventListener("scroll",H),()=>{n==null||n.removeEventListener("scroll",H)}},[R]),o.useEffect(()=>{typeof g=="function"&&M(g(z.current||""))},[g]),o.useEffect(()=>{pe()},[d,g,R,b]);const ve=o.useMemo(()=>({registerLink:de,unregisterLink:ue,scrollTo:V,activeLink:b,onClick:I,direction:d}),[b,I,V,d]),Ce=p&&typeof p=="object"?p:void 0;return ae(o.createElement(ee.Provider,{value:ve},p?o.createElement(ze,Object.assign({offsetTop:l,target:B},Ce),J):J))},ne=Ve;ne.Link=te;const Ge=({list:t})=>{const[e,i]=o.useState(1),c=t.slice(0,e).map(r=>({key:`page-${r.page}`,href:`#page-${r.page}`,title:" "})),a=o.useCallback(r=>{const l=parseInt(r.slice(6));l>e-5&&i(l+5)},[e]);return u.jsxs(Ee,{className:"mt-4",children:[u.jsx(Y,{span:23,children:t.slice(0,e).map(r=>u.jsx("div",{id:`page-${r.page}`,className:"text-center",children:r.page<e?u.jsx(Ne,{preview:!1,alt:`Page ${r.page}`,src:Le(`storage/chapter-pages/${r.img_url}`),fallback:je,className:"w-screen h-screen object-cover object-center",loading:"lazy"}):u.jsx(Pe,{justify:"center",align:"middle",style:{height:Math.floor(r.height/2)},children:u.jsx(Be,{size:"large"})})},r.id))}),u.jsx(Y,{className:"hidden sm:block",span:1,children:u.jsx(ne,{replace:!0,offsetTop:70,items:c,onChange:a})})]})},Je=Ge;function ht({auth:t,chapter:e,allChapterList:i}){var r,l,p,k,v,C,d;const c={title:`Chapter ${e.chapter} - ${e.title} - Affixbook.net | เว็บไซต์อ่านหนังสือออนไลน์`,description:((r=e.book)==null?void 0:r.synopsis)||_e.description,keywords:(((l=e.book)==null?void 0:l.categories)||[]).map($=>$.name),author:"",canonical:route("chapters.show",e.slug)},a=[{key:1,title:"Home",href:route("home")},{key:2,title:(p=e.book)==null?void 0:p.type,href:route(`books.${Me(((k=e.book)==null?void 0:k.type)||"")}`)},{key:3,title:(v=e.book)==null?void 0:v.title,href:route("books.show",(C=e.book)==null?void 0:C.id),isLinkLast:!0}];return u.jsxs(Oe,{title:((d=e==null?void 0:e.book)==null?void 0:d.title)||"",user:t.user,bookId:e.book_id,defaultChapter:e.chapter,list:i||[],breadcrumbs:a,children:[u.jsx(Re,{meta:c}),u.jsxs("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8 pb-12",children:[u.jsx(Je,{list:e.pages||[]}),u.jsx(He.BackTop,{})]})]})}export{ht as default};
