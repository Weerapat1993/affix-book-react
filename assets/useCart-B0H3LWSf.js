import{r as c,X as R,y as U,aU as E,aV as I,aW as S,aX as x,aY as L,aZ as M}from"./app-seHo-2Pj.js";import{b as a,d as l,c as z}from"./FooterLayout-Vber5aYW.js";import{s as H}from"./index-BDXsA6_q.js";var T={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M922.9 701.9H327.4l29.9-60.9 496.8-.9c16.8 0 31.2-12 34.2-28.6l68.8-385.1c1.8-10.1-.9-20.5-7.5-28.4a34.99 34.99 0 00-26.6-12.5l-632-2.1-5.4-25.4c-3.4-16.2-18-28-34.6-28H96.5a35.3 35.3 0 100 70.6h125.9L246 312.8l58.1 281.3-74.8 122.1a34.96 34.96 0 00-3 36.8c6 11.9 18.1 19.4 31.5 19.4h62.8a102.43 102.43 0 00-20.6 61.7c0 56.6 46 102.6 102.6 102.6s102.6-46 102.6-102.6c0-22.3-7.4-44-20.6-61.7h161.1a102.43 102.43 0 00-20.6 61.7c0 56.6 46 102.6 102.6 102.6s102.6-46 102.6-102.6c0-22.3-7.4-44-20.6-61.7H923c19.4 0 35.3-15.8 35.3-35.3a35.42 35.42 0 00-35.4-35.2zM305.7 253l575.8 1.9-56.4 315.8-452.3.8L305.7 253zm96.9 612.7c-17.4 0-31.6-14.2-31.6-31.6 0-17.4 14.2-31.6 31.6-31.6s31.6 14.2 31.6 31.6a31.6 31.6 0 01-31.6 31.6zm325.1 0c-17.4 0-31.6-14.2-31.6-31.6 0-17.4 14.2-31.6 31.6-31.6s31.6 14.2 31.6 31.6a31.6 31.6 0 01-31.6 31.6z"}}]},name:"shopping-cart",theme:"outlined"},b=function(d,s){return c.createElement(R,U({},d,{ref:s,icon:T}))},B=c.forwardRef(b);const V=()=>{const[e,d]=H.useMessage(),s=a(t=>t.cartReducer.data.products),v=a(t=>t.cartReducer.data.code),n=a(t=>t.cartReducer.data.isUsePoint),C=l(n),i=a(t=>t.cartReducer.data.isErrorCoupon),f=l(i),u=a(t=>t.cartReducer.data.isCanUse),h=l(u),p=a(t=>t.cartReducer.data.discount),o=z(),m=s.reduce((t,P)=>t+P.price*P.qty,0),y=m-p,g=s.length>0,r="updatable";return c.useEffect(()=>{h===!1&&u&&e.open({key:r,type:"success",content:"คุณสามารถใช้คูปองได้ !",duration:2})},[h,u]),c.useEffect(()=>{f===!1&&i&&e.open({key:r,type:"error",content:"คุณไม่สามารถใช้คูปองได้ !",duration:2})},[f,i]),c.useEffect(()=>{C===!1&&n&&e.open({key:r,type:"success",content:`คุณได้ใช้ Point ไปแล้วจำนวน ${p} Points !`,duration:2})},[C,n]),{carts:s,allPrice:m,discount:p,totalPrice:y,isCanUse:u,isUsePoint:n,isErrorCoupon:i,currentCode:v,contextHolder:d,addProductToCart:t=>{o(E(t))},removeProductInCart:t=>{o(I(t))},searchCodeCoupon:t=>{g?o(S(t)):e.open({key:r,type:"error",content:"คุณยังไม่มีสินค้าในตะกร้า !",duration:2})},deleteCoupon:()=>{o(L())},setUsePoint:t=>{g?o(x(t)):e.open({key:r,type:"error",content:"คุณยังไม่มีสินค้าในตะกร้า !",duration:2})},getDataFromLocalStorage:()=>{o(M())}}};export{B as R,V as u};
