import{aL as y,r as h,cr as S,cs as L,ct as b,cu as A,cv as I,j as t,Y as N,aC as T,B as E}from"./app-Dg8HGri5.js";import{A as H}from"./AuthenticatedLayout-Dyia8Uad.js";import{B as z}from"./BookList-DraY5_5E.js";import{l as c,m as D,n as C,e as $,P as Y}from"./LayoutBreadcrumb-FYt7O-h6.js";import{u as q}from"./useDebounce-Cal2jPBj.js";import{I as G}from"./index-BE15Rycn.js";import{F as P}from"./ApplicationLogo-CaO9lwQU.js";import{R as J}from"./PlusOutlined-8VTVOCcu.js";import{C as K}from"./index-C7eIKsZe.js";import{F as M}from"./index-DnLnJen6.js";/* empty css            */import"./x-Dbqrkz9x.js";import"./createLucideIcon-BUZvSNL_.js";import"./laravelBlade-DnAXOTAM.js";import"./index-Bz-I84Jn.js";import"./EyeOutlined-CuFUm0zo.js";import"./addEventListener-DiZ7j4_m.js";import"./scrollTo-B9OUNoJo.js";const O=({flash:p})=>{const{message:m}=y.useApp(),a=c(e=>e.writerReducer.isFetch),u=c(e=>e.writerReducer.isLoading),d=c(e=>e.writerReducer.isFlash),l=c(e=>e.writerReducer.error),o=c(e=>e.writerReducer.pagination),s=c(e=>e.writerReducer.pagination.page),i=c(e=>e.writerReducer.pages),r=c(e=>e.writerReducer.filters.title),n=D(),g=C(r),x=C(s),F=x!==s&&x!==void 0,j=g!==r&&g!==void 0,k=!(i!=null&&i[s]);h.useEffect(()=>{p==="refetch"&&!d?(m.success("Success"),f({page:s,title:r}),n(S(!0))):a?F&&k?f({page:s,title:r}):j&&s!==1?B(1):j&&s===1&&f({page:s,title:r}):f({page:s,title:r})},[s,r]);const R=h.useCallback(e=>{n(L({title:e}))},[]),w=h.useCallback(e=>{n(b({page:e}))},[]),B=h.useCallback(e=>{n(A({page:e}))},[]),f=async e=>await n(I(e)),v=(i==null?void 0:i[o==null?void 0:o.page])||[],W=(o==null?void 0:o.lastPage)||1;return{list:v,lastPage:W,pagination:o,page:s,title:r,isFetch:a,isLoading:u,error:l,refetch:f,setWriterPage:w,setWriterFilterTitle:R}},Q=({onChangeText:p,defaultValue:m})=>{const[a,u]=h.useState(m);q(()=>{p&&p(a)},1e3,[a]);const d=({currentTarget:l})=>{u((l==null?void 0:l.value)||"")};return t.jsx(G,{placeholder:"Writer Search",allowClear:!0,prefix:t.jsx($,{}),variant:"filled",onChange:d,defaultValue:m})},U=Q;function he(p){const{flash:m}=p,{pagination:a,page:u,list:d,isLoading:l,title:o,setWriterPage:s,setWriterFilterTitle:i}=O({flash:m.message}),r=g=>{s(g)},n=[{key:1,title:"Home",href:route("home")},{key:2,title:"หน้านักเขียน",isLast:!0}];return t.jsxs(H,{breadcrumbs:n,children:[t.jsx(N,{title:"Book List"}),t.jsx("div",{className:"py-12",children:t.jsxs("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8",children:[t.jsxs(P,{justify:"end",gap:"small",className:"my-4",children:[a.total?t.jsx(Y,{current:u,onChange:r,total:a.total,defaultPageSize:a.pageSize,align:"end"}):null,t.jsx(T,{href:route("books.create"),children:t.jsx(E,{type:"primary",icon:t.jsx(J,{}),children:"Create"})})]}),t.jsx(K,{title:t.jsx(P,{justify:"end",gap:"small",children:t.jsx(U,{defaultValue:o,onChangeText:i})}),children:t.jsx(z,{isLoading:l,list:d})}),t.jsx(M.BackTop,{})]})})]})}export{he as default};
