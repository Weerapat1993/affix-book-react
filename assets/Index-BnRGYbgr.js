import{aF as v,r as h,ci as S,cj as y,ck as A,cl as L,cm as b,j as s,Y as I,aD as N,B as T}from"./app-DpMSqZno.js";import{A as z}from"./AuthenticatedLayout-Db7F19Hl.js";import{B as D}from"./BookList-CUzvBzYl.js";import{m as c,n as E,p as F,f as H,P as $}from"./FooterLayout-B7IU0h2A.js";import{u as Y}from"./useDebounce-ex_aAb2W.js";import{I as q}from"./index-B8Ky_iqW.js";import{F as G}from"./ApplicationLogo-9L4KVSOt.js";import{R as J}from"./PlusOutlined-BzUaCXBt.js";import{F as K}from"./index-CyrOCrc-.js";import"./index-BYqGNjfZ.js";import"./index-DOobr709.js";import"./EyeOutlined-NhxnA974.js";import"./addEventListener-DkpXA2Nd.js";import"./scrollTo-D_iyd36Q.js";const M=({flash:p})=>{const{message:u}=v.useApp(),a=c(e=>e.writerReducer.isFetch),m=c(e=>e.writerReducer.isLoading),f=c(e=>e.writerReducer.isFlash),n=c(e=>e.writerReducer.error),o=c(e=>e.writerReducer.pagination),t=c(e=>e.writerReducer.pagination.page),i=c(e=>e.writerReducer.pages),r=c(e=>e.writerReducer.filters.title),l=E(),g=F(r),x=F(t),P=x!==t&&x!==void 0,j=g!==r&&g!==void 0,k=!(i!=null&&i[t]);h.useEffect(()=>{p==="refetch"&&!f?(u.success("Success"),d({page:t,title:r}),l(S(!0))):a?P&&k?d({page:t,title:r}):j&&t!==1?w(1):j&&t===1&&d({page:t,title:r}):d({page:t,title:r})},[t,r]);const C=h.useCallback(e=>{l(y({title:e}))},[]),R=h.useCallback(e=>{l(A({page:e}))},[]),w=h.useCallback(e=>{l(L({page:e}))},[]),d=async e=>await l(b(e)),B=(i==null?void 0:i[o==null?void 0:o.page])||[],W=(o==null?void 0:o.lastPage)||1;return{list:B,lastPage:W,pagination:o,page:t,title:r,isFetch:a,isLoading:m,error:n,refetch:d,setWriterPage:R,setWriterFilterTitle:C}},O=({onChangeText:p,defaultValue:u})=>{const[a,m]=h.useState(u);Y(()=>{p&&p(a)},1e3,[a]);const f=({currentTarget:n})=>{m((n==null?void 0:n.value)||"")};return s.jsx(q,{placeholder:"Writer Search",allowClear:!0,prefix:s.jsx(H,{}),size:"large",variant:"filled",onChange:f,defaultValue:u})},Q=O;function pe(p){const{flash:u}=p,{pagination:a,page:m,list:f,isLoading:n,title:o,setWriterPage:t,setWriterFilterTitle:i}=M({flash:u.message}),r=l=>{t(l)};return s.jsxs(z,{header:s.jsx(Q,{defaultValue:o,onChangeText:i}),children:[s.jsx(I,{title:"Book List"}),s.jsx("div",{className:"py-12",children:s.jsxs("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8",children:[s.jsxs(G,{justify:"end",gap:"small",className:"my-4",children:[a.total?s.jsx($,{current:m,onChange:r,total:a.total,defaultPageSize:a.pageSize,align:"end"}):null,s.jsx(N,{href:route("books.create"),children:s.jsx(T,{type:"primary",icon:s.jsx(J,{}),children:"Create"})})]}),s.jsx(D,{isLoading:n,list:f}),s.jsx(K.BackTop,{})]})})]})}export{pe as default};
