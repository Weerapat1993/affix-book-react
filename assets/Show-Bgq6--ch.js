import{r as o,G as Z,H as P,I as be,J as ye,N as $e,L as q,ax as Se,ab as we,ae as F,F as Le,j as u}from"./app-WwKEh0jh.js";import{a as ee,b as je}from"./laravelBlade-DnAXOTAM.js";import{F as Ee,G as Y,S as Be}from"./LayoutBreadcrumb-CeASog34.js";import{I as Ie}from"./index-D1XomUSC.js";import{F as Ne}from"./ApplicationLogo-LqjnO7QA.js";import{e as Pe}from"./index-pTK18D2Z.js";import{g as Te,s as Ae}from"./scrollTo-C8ZUE04C.js";import{A as ze}from"./index-ncEU8wIH.js";import{M as Oe}from"./MangaLayout-Caw3uWvQ.js";import{d as _e}from"./seo-Bktiihya.js";import{S as Re}from"./SeoHead-BouEdQxZ.js";import{a as Me}from"./case-C3L00SbD.js";import{F as He}from"./index-CnGxEFRJ.js";/* empty css            */import"./createLucideIcon-jXqLjUQ1.js";import"./EyeOutlined-CMXjSh65.js";import"./addEventListener-CNrLjL6E.js";import"./index-BKNjMPK8.js";import"./index.es-BGlEZQ2y.js";import"./DeleteOutlined-B2hNzAM5.js";import"./index-XJRXuWrL.js";const te=o.createContext(void 0),ne=t=>{const{href:e,title:i,prefixCls:c,children:a,className:s,target:l,replace:p}=t,C=o.useContext(te),{registerLink:x,unregisterLink:b,scrollTo:d,onClick:y,activeLink:g,direction:w}=C||{};o.useEffect(()=>(x==null||x(e),()=>{b==null||b(e)}),[e]);const v=$=>{y==null||y($,{title:i,href:e}),d==null||d(e),p&&($.preventDefault(),window.location.replace(e))},{getPrefixCls:B}=o.useContext(Z),m=B("anchor",c),T=g===e,j=P(`${m}-link`,s,{[`${m}-link-active`]:T}),A=P(`${m}-link-title`,{[`${m}-link-title-active`]:T});return o.createElement("div",{className:j},o.createElement("a",{className:A,href:e,title:typeof i=="string"?i:"",target:l,onClick:v},i),w!=="horizontal"?a:null)},De=t=>{const{componentCls:e,holderOffsetBlock:i,motionDurationSlow:c,lineWidthBold:a,colorPrimary:s,lineType:l,colorSplit:p,calc:C}=t;return{[`${e}-wrapper`]:{marginBlockStart:C(i).mul(-1).equal(),paddingBlockStart:i,[e]:Object.assign(Object.assign({},$e(t)),{position:"relative",paddingInlineStart:a,[`${e}-link`]:{paddingBlock:t.linkPaddingBlock,paddingInline:`${q(t.linkPaddingInlineStart)} 0`,"&-title":Object.assign(Object.assign({},Se),{position:"relative",display:"block",marginBlockEnd:t.anchorTitleBlock,color:t.colorText,transition:`all ${t.motionDurationSlow}`,"&:only-child":{marginBlockEnd:0}}),[`&-active > ${e}-link-title`]:{color:t.colorPrimary},[`${e}-link`]:{paddingBlock:t.anchorPaddingBlockSecondary}}}),[`&:not(${e}-wrapper-horizontal)`]:{[e]:{"&::before":{position:"absolute",insetInlineStart:0,top:0,height:"100%",borderInlineStart:`${q(a)} ${l} ${p}`,content:'" "'},[`${e}-ink`]:{position:"absolute",insetInlineStart:0,display:"none",transform:"translateY(-50%)",transition:`top ${c} ease-in-out`,width:a,backgroundColor:s,[`&${e}-ink-visible`]:{display:"inline-block"}}}},[`${e}-fixed ${e}-ink ${e}-ink`]:{display:"none"}}}},Fe=t=>{const{componentCls:e,motionDurationSlow:i,lineWidthBold:c,colorPrimary:a}=t;return{[`${e}-wrapper-horizontal`]:{position:"relative","&::before":{position:"absolute",left:{_skip_check_:!0,value:0},right:{_skip_check_:!0,value:0},bottom:0,borderBottom:`${q(t.lineWidth)} ${t.lineType} ${t.colorSplit}`,content:'" "'},[e]:{overflowX:"scroll",position:"relative",display:"flex",scrollbarWidth:"none","&::-webkit-scrollbar":{display:"none"},[`${e}-link:first-of-type`]:{paddingInline:0},[`${e}-ink`]:{position:"absolute",bottom:0,transition:`left ${i} ease-in-out, width ${i} ease-in-out`,height:c,backgroundColor:a}}}}},qe=t=>({linkPaddingBlock:t.paddingXXS,linkPaddingInlineStart:t.padding}),We=be("Anchor",t=>{const{fontSize:e,fontSizeLG:i,paddingXXS:c,calc:a}=t,s=ye(t,{holderOffsetBlock:c,anchorPaddingBlockSecondary:a(c).div(2).equal(),anchorTitleBlock:a(e).div(14).mul(3).equal(),anchorBallSize:a(i).div(2).equal()});return[De(s),Fe(s)]},qe);function Xe(){return window}function K(t,e){if(!t.getClientRects().length)return 0;const i=t.getBoundingClientRect();return i.width||i.height?e===window?i.top-t.ownerDocument.documentElement.clientTop:i.top-e.getBoundingClientRect().top:i.top}const Q=/#([\S ]+)$/,Ve=t=>{var e;const{rootClassName:i,prefixCls:c,className:a,style:s,offsetTop:l,affix:p=!0,showInkInFixed:C=!1,children:x,items:b,direction:d="vertical",bounds:y,targetOffset:g,onClick:w,onChange:v,getContainer:B,getCurrentAnchor:m,replace:T}=t,[j,A]=o.useState([]),[$,ie]=o.useState(null),z=o.useRef($),W=o.useRef(null),O=o.useRef(null),_=o.useRef(!1),{direction:re,anchor:E,getTargetContainer:se,getPrefixCls:ae}=o.useContext(Z),k=ae("anchor",c),X=we(k),[le,ce,de]=We(k,X),I=(e=B??se)!==null&&e!==void 0?e:Xe,R=JSON.stringify(j),ue=F(n=>{j.includes(n)||A(r=>[].concat(Le(r),[n]))}),pe=F(n=>{j.includes(n)&&A(r=>r.filter(h=>h!==n))}),fe=()=>{var n;const r=(n=W.current)===null||n===void 0?void 0:n.querySelector(`.${k}-link-title-active`);if(r&&O.current){const{style:h}=O.current,f=d==="horizontal";h.top=f?"":`${r.offsetTop+r.clientHeight/2}px`,h.height=f?"":`${r.clientHeight}px`,h.left=f?`${r.offsetLeft}px`:"",h.width=f?`${r.clientWidth}px`:"",f&&Pe(r,{scrollMode:"if-needed",block:"nearest"})}},ge=function(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,h=arguments.length>2&&arguments[2]!==void 0?arguments[2]:5;const f=[],D=I();return n.forEach(L=>{const S=Q.exec(L==null?void 0:L.toString());if(!S)return;const N=document.getElementById(S[1]);if(N){const U=K(N,D);U<=r+h&&f.push({link:L,top:U})}}),f.length?f.reduce((S,N)=>N.top>S.top?N:S).link:""},M=F(n=>{if(z.current===n)return;const r=typeof m=="function"?m(n):n;ie(r),z.current=r,v==null||v(n)}),H=o.useCallback(()=>{if(_.current)return;const n=ge(j,g!==void 0?g:l||0,y);M(n)},[R,g,l]),V=o.useCallback(n=>{M(n);const r=Q.exec(n);if(!r)return;const h=document.getElementById(r[1]);if(!h)return;const f=I(),D=Te(f),L=K(h,f);let S=D+L;S-=g!==void 0?g:l||0,_.current=!0,Ae(S,{getContainer:I,callback(){_.current=!1}})},[g,l]),me=P(ce,de,X,i,`${k}-wrapper`,{[`${k}-wrapper-horizontal`]:d==="horizontal",[`${k}-rtl`]:re==="rtl"},a,E==null?void 0:E.className),he=P(k,{[`${k}-fixed`]:!p&&!C}),ke=P(`${k}-ink`,{[`${k}-ink-visible`]:$}),ve=Object.assign(Object.assign({maxHeight:l?`calc(100vh - ${l}px)`:"100vh"},E==null?void 0:E.style),s),G=n=>Array.isArray(n)?n.map(r=>o.createElement(ne,Object.assign({replace:T},r,{key:r.key}),d==="vertical"&&G(r.children))):null,J=o.createElement("div",{ref:W,className:me,style:ve},o.createElement("div",{className:he},o.createElement("span",{className:ke,ref:O}),"items"in t?G(b):x));o.useEffect(()=>{const n=I();return H(),n==null||n.addEventListener("scroll",H),()=>{n==null||n.removeEventListener("scroll",H)}},[R]),o.useEffect(()=>{typeof m=="function"&&M(m(z.current||""))},[m]),o.useEffect(()=>{fe()},[d,m,R,$]);const Ce=o.useMemo(()=>({registerLink:ue,unregisterLink:pe,scrollTo:V,activeLink:$,onClick:w,direction:d}),[$,w,V,d]),xe=p&&typeof p=="object"?p:void 0;return le(o.createElement(te.Provider,{value:Ce},p?o.createElement(ze,Object.assign({offsetTop:l,target:I},xe),J):J))},oe=Ve;oe.Link=ne;const Ge=({list:t})=>{const[e,i]=o.useState(2),c=t.slice(0,e).map(s=>({key:`page-${s.page}`,href:`#page-${s.page}`,title:" "})),a=o.useCallback(s=>{const l=parseInt(s.slice(6));l>e-5&&i(l+5)},[e]);return u.jsxs(Ee,{className:"mt-4",children:[u.jsx(Y,{span:23,children:t.slice(0,e).map(s=>u.jsx("div",{id:`page-${s.page}`,className:"text-center",children:s.page<e?u.jsx(Ie,{preview:!1,alt:`Page ${s.page}`,src:ee(`storage/chapter-pages/${s.img_url}`),fallback:je,className:"w-screen h-screen object-cover object-center",loading:"lazy"}):u.jsx(Ne,{justify:"center",align:"middle",style:{height:Math.floor(s.height/2)},children:u.jsx(Be,{size:"large"})})},s.id))}),u.jsx(Y,{className:"hidden sm:block",span:1,children:u.jsx(oe,{replace:!0,offsetTop:70,items:c,onChange:a})})]})},Je=Ge;function ht({auth:t,chapter:e,allChapterList:i}){var l,p,C,x,b,d,y,g,w;const c=ee(`storage/${(p=(l=e.pages)==null?void 0:l.filter(v=>v.page===1))==null?void 0:p[0].img_url}`),a={title:`Chapter ${e.chapter} : ${e.title} - Affixbook.net | เว็บไซต์อ่านหนังสือออนไลน์`,description:((C=e.book)==null?void 0:C.synopsis)||_e.description,keywords:(((x=e.book)==null?void 0:x.categories)||[]).map(v=>v.name),author:"",canonical:route("chapters.show",e.slug),image:c},s=[{key:1,title:"Home",href:route("home")},{key:2,title:(b=e.book)==null?void 0:b.type,href:route(`books.${Me(((d=e.book)==null?void 0:d.type)||"")}`)},{key:3,title:(y=e.book)==null?void 0:y.title,href:route("books.show",(g=e.book)==null?void 0:g.id),isLinkLast:!0}];return u.jsxs(Oe,{title:((w=e==null?void 0:e.book)==null?void 0:w.title)||"",user:t.user,bookId:e.book_id,defaultChapter:e.chapter,list:i||[],breadcrumbs:s,children:[u.jsx(Re,{meta:a}),u.jsxs("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8 pb-12",children:[u.jsx(Je,{list:e.pages||[]}),u.jsx(He.BackTop,{})]})]})}export{ht as default};
