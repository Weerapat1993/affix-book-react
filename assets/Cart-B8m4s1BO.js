import{L as M,r as l,I as z,J as W,ah as G,ai as J,B as w,aj as Q,ak as Z,al as q,V as ee,j as e,Y as te}from"./app-CV9A9Knv.js";import{A as ne}from"./AuthenticatedLayout-lCtMtmb_.js";import{u as B,R as oe}from"./useCart-CDr3v43E.js";import{C as L}from"./index-Crwc0KU0.js";import{n as re,o as D,a as se,p as le,R as _,C as v,q as ae,S as V,D as ce,T as ie}from"./FooterLayout-DlX_7gvg.js";import{R as A}from"./DeleteOutlined-DCvoU7na.js";import{F as de}from"./Table-Da-91tPc.js";import{F as k}from"./ApplicationLogo-CrVoc7yY.js";import{s as F}from"./index-CGHJpXRw.js";import{R as E}from"./index-sZf9PeB6.js";import{I as $}from"./index-BIzTDWqz.js";import"./PlusOutlined-BID3IEi_.js";import"./addEventListener-B42ZgBRq.js";import"./scrollTo-DwBBsVjo.js";import"./EyeOutlined-B5K90arK.js";const pe=t=>{const{componentCls:o,iconCls:a,antCls:n,zIndexPopup:s,colorText:x,colorWarning:m,marginXXS:d,marginXS:p,fontSize:i,fontWeightStrong:f,colorTextHeading:h}=t;return{[o]:{zIndex:s,[`&${n}-popover`]:{fontSize:i},[`${o}-message`]:{marginBottom:p,display:"flex",flexWrap:"nowrap",alignItems:"start",[`> ${o}-message-icon ${a}`]:{color:m,fontSize:i,lineHeight:1,marginInlineEnd:p},[`${o}-title`]:{fontWeight:f,color:h,"&:only-child":{fontWeight:"normal"}},[`${o}-description`]:{marginTop:d,color:x}},[`${o}-buttons`]:{textAlign:"end",whiteSpace:"nowrap",button:{marginInlineStart:p}}}}},me=t=>{const{zIndexPopupBase:o}=t;return{zIndexPopup:o+60}},H=M("Popconfirm",t=>pe(t),me,{resetStyle:!1});var ue=function(t,o){var a={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&o.indexOf(n)<0&&(a[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(t);s<n.length;s++)o.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(t,n[s])&&(a[n[s]]=t[n[s]]);return a};const U=t=>{const{prefixCls:o,okButtonProps:a,cancelButtonProps:n,title:s,description:x,cancelText:m,okText:d,okType:p="primary",icon:i=l.createElement(q,null),showCancel:f=!0,close:h,onConfirm:y,onCancel:C,onPopupClick:b}=t,{getPrefixCls:j}=l.useContext(z),[r]=G("Popconfirm",J.Popconfirm),c=D(s),S=D(x);return l.createElement("div",{className:`${o}-inner-content`,onClick:b},l.createElement("div",{className:`${o}-message`},i&&l.createElement("span",{className:`${o}-message-icon`},i),l.createElement("div",{className:`${o}-message-text`},c&&l.createElement("div",{className:`${o}-title`},c),S&&l.createElement("div",{className:`${o}-description`},S))),l.createElement("div",{className:`${o}-buttons`},f&&l.createElement(w,Object.assign({onClick:C,size:"small"},n),m||(r==null?void 0:r.cancelText)),l.createElement(Q,{buttonProps:Object.assign(Object.assign({size:"small"},Z(p)),a),actionFn:y,close:h,prefixCls:j("btn"),quitOnNullishReturnValue:!0,emitEvent:!0},d||(r==null?void 0:r.okText))))},xe=t=>{const{prefixCls:o,placement:a,className:n,style:s}=t,x=ue(t,["prefixCls","placement","className","style"]),{getPrefixCls:m}=l.useContext(z),d=m("popconfirm",o),[p]=H(d);return p(l.createElement(re,{placement:a,className:W(d,n),style:s,content:l.createElement(U,Object.assign({prefixCls:d},x))}))};var he=function(t,o){var a={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&o.indexOf(n)<0&&(a[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(t);s<n.length;s++)o.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(t,n[s])&&(a[n[s]]=t[n[s]]);return a};const ge=l.forwardRef((t,o)=>{var a,n;const{prefixCls:s,placement:x="top",trigger:m="click",okType:d="primary",icon:p=l.createElement(q,null),children:i,overlayClassName:f,onOpenChange:h,onVisibleChange:y}=t,C=he(t,["prefixCls","placement","trigger","okType","icon","children","overlayClassName","onOpenChange","onVisibleChange"]),{getPrefixCls:b}=l.useContext(z),[j,r]=se(!1,{value:(a=t.open)!==null&&a!==void 0?a:t.visible,defaultValue:(n=t.defaultOpen)!==null&&n!==void 0?n:t.defaultVisible}),c=(u,g)=>{r(u,!0),y==null||y(u),h==null||h(u,g)},S=u=>{c(!1,u)},T=u=>{var g;return(g=t.onConfirm)===null||g===void 0?void 0:g.call(void 0,u)},P=u=>{var g;c(!1,u),(g=t.onCancel)===null||g===void 0||g.call(void 0,u)},I=(u,g)=>{const{disabled:K=!1}=t;K||c(u,g)},N=b("popconfirm",s),X=W(N,f),[Y]=H(N);return Y(l.createElement(le,Object.assign({},ee(C,["title"]),{trigger:m,placement:x,onOpenChange:I,open:j,ref:o,overlayClassName:X,content:l.createElement(U,Object.assign({okType:d,icon:p},t,{prefixCls:N,close:S,onConfirm:T,onCancel:P})),"data-popover-inject":!0}),i))}),R=ge;R._InternalPanelDoNotUseOrYouWillBeFired=xe;const fe=()=>{const{carts:t,removeProductInCart:o}=B(),a=r=>r,[n,s]=l.useState([]),[x,m]=l.useState(!1),d=t.map(r=>({key:r.product_id,name:r.name,price:r.price,qty:r.qty,total:r.price*r.qty})),p=[{title:"Name",key:"name",dataIndex:"name",sorter:(r,c)=>r.name-c.name},{title:"Price",key:"price",width:"100px",render:(r,c)=>e.jsx(k,{wrap:!0,gap:"small",children:e.jsxs("b",{children:["฿ ",c.price]})})},{title:"QTY",key:"qty",dataIndex:"qty",width:"100px",align:"center"},{title:"Total",key:"total",width:"100px",render:(r,c)=>e.jsx(k,{wrap:!0,gap:"small",children:e.jsxs("b",{children:["฿ ",c.total]})})},{title:"Action",key:"action",width:"120px",render:(r,c)=>e.jsx(k,{wrap:!0,gap:"small",children:e.jsx(R,{title:"Delete the product",description:"Are you sure to delete this product?",onConfirm:()=>y(c.key),onCancel:()=>null,okText:a("form.btn.yes"),cancelText:a("form.btn.no"),children:e.jsx(ae,{title:a("form.btn.delete"),children:e.jsx(w,{shape:"circle",type:"primary",danger:!0,icon:e.jsx(A,{})})})})})}],i=r=>{s(r)},f=r=>{m(!0),setTimeout(()=>{o(r),F.success("Delete product completed!"),s([]),m(!1)},1e3)},h=r=>{f(n)},y=r=>{f([r])},C=r=>{F.error("Cancel delete product!")},b={selectedRowKeys:n,onChange:i},j=n.length>0;return e.jsxs(L,{title:"Cart Items",children:[e.jsx("div",{style:{marginBottom:16},children:e.jsx(_,{children:e.jsx(v,{span:24,children:j?e.jsxs(e.Fragment,{children:[e.jsx(R,{title:"Delete the product",description:"Are you sure to delete this product?",onConfirm:h,onCancel:C,okText:a("form.btn.yes"),cancelText:a("form.btn.no"),children:e.jsx(w,{type:"primary",danger:!0,icon:e.jsx(A,{}),disabled:!j,loading:x,children:a("form.btn.delete")})}),e.jsx("span",{style:{marginLeft:8},children:j?`Selected ${n.length} items`:""})]}):null})})}),e.jsx(de,{rowSelection:b,columns:p,dataSource:d,scroll:{x:200}})]})},ye=fe,{Text:O}=ie,{Search:Ce}=$,je=t=>{const[o,a]=l.useState("coupon"),{allPrice:n,discount:s,totalPrice:x,isCanUse:m,currentCode:d,contextHolder:p,isUsePoint:i,searchCodeCoupon:f,deleteCoupon:h,setUsePoint:y}=B(),[C,b]=l.useState(i?s:0),j=P=>{f(P)},r=({target:{value:P}})=>{a(P)},c=P=>{const I=P.target.value;b(parseInt(I))},S=()=>{y(C)},T="THB";return e.jsxs(L,{title:"Cart Summary",actions:[e.jsx(w,{type:"primary",size:"large",icon:e.jsx(oe,{}),onClick:()=>null,disabled:n<=0,children:"Checkout"})],children:[p,e.jsxs(k,{vertical:!0,gap:"middle",children:[e.jsx("center",{children:e.jsxs(E.Group,{onChange:r,defaultValue:"coupon",buttonStyle:"solid",children:[e.jsx(E.Button,{value:"coupon",children:"Coupon"}),e.jsx(E.Button,{value:"point",children:"Point"})]})}),o==="coupon"?e.jsx(l.Fragment,{children:m||i?e.jsxs(V.Compact,{style:{width:"100%"},children:[e.jsx($,{size:"large",disabled:!0,value:i?`${s} pts`:d}),e.jsx(w,{size:"large",onClick:h,type:"primary",danger:!0,children:i?e.jsx("span",{children:"ลบ Point"}):e.jsx("span",{children:"ลบคูปอง"})})]}):e.jsx(Ce,{placeholder:"ใส่โค้ด",allowClear:!0,enterButton:"ใช้คูปอง",size:"large",onSearch:j})}):e.jsx(l.Fragment,{children:e.jsxs(V.Compact,{style:{width:"100%"},children:[e.jsx($,{type:"number",size:"large",defaultValue:C,value:C,onChange:c}),e.jsx(w,{size:"large",onClick:S,type:"primary",children:"ใช้ Point"})]})})]}),e.jsx(ce,{}),e.jsxs(_,{gutter:[8,8],children:[e.jsx(v,{span:12,children:e.jsx(O,{children:"All Price"})}),e.jsx(v,{span:12,style:{textAlign:"right"},children:e.jsxs(O,{children:[n," ",T]})}),s>0?e.jsxs(l.Fragment,{children:[e.jsx(v,{span:12,children:e.jsx(O,{type:"danger",children:"Discount"})}),e.jsx(v,{span:12,style:{textAlign:"right"},children:e.jsxs(O,{type:"danger",children:["- ",s," ",T]})})]}):null,e.jsx(v,{span:12,children:e.jsx(O,{style:{fontWeight:"bold"},children:"Total Price"})}),e.jsx(v,{span:12,style:{textAlign:"right"},children:e.jsxs(O,{style:{fontWeight:"bold"},children:[x," ",T]})})]})]})},ve=je;function De({auth:t}){const{getDataFromLocalStorage:o}=B();return l.useEffect(()=>{o()},[]),e.jsxs(ne,{user:t.user,header:e.jsx("h2",{className:"font-semibold text-xl text-gray-800 dark:text-gray-200 leading-tight",children:"Cart"}),children:[e.jsx(te,{title:"Dashboard"}),e.jsx("div",{className:"py-12",children:e.jsx("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8",children:e.jsxs(_,{gutter:[16,16],children:[e.jsx(v,{xs:24,md:16,children:e.jsx(ye,{})}),e.jsx(v,{xs:24,md:8,children:e.jsx(ve,{})})]})})})]})}export{De as default};
