import{r as p,U as M,w as S,aL as T,aM as O,aN as E,aO as H,aP as $,j as a,B as D}from"./app-DhWH3rvC.js";import{A as z}from"./AuthenticatedLayout-mS5g1UMm.js";import{B as U}from"./BookList-D2Qf4KNE.js";import{l as d,m as W,n as k,u as _,T as q}from"./FooterLayout-CRlaf7-p.js";import{C as G}from"./CategoryFilter-CcLbnkfH.js";import{d as B}from"./seo-Bktiihya.js";import{S as J}from"./SeoHead-COA2ZbvZ.js";import{C as K}from"./card-Ciqe3ffQ.js";import{C as Q}from"./index-CxyQ1JFf.js";import{F as V}from"./ApplicationLogo-M4ZVY257.js";import{F as X}from"./index-B3xHXN6h.js";/* empty css            */import"./x-sLudLN6_.js";import"./laravelBlade-DnAXOTAM.js";import"./index-BGi930PO.js";import"./EyeOutlined-DoTiAJiU.js";import"./addEventListener-CP3BZA_Z.js";import"./PlusOutlined-nBvp8qJk.js";import"./scrollTo-EE3brYNg.js";var Y={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M909.1 209.3l-56.4 44.1C775.8 155.1 656.2 92 521.9 92 290 92 102.3 279.5 102 511.5 101.7 743.7 289.8 932 521.9 932c181.3 0 335.8-115 394.6-276.1 1.5-4.2-.7-8.9-4.9-10.3l-56.7-19.5a8 8 0 00-10.1 4.8c-1.8 5-3.8 10-5.9 14.9-17.3 41-42.1 77.8-73.7 109.4A344.77 344.77 0 01655.9 829c-42.3 17.9-87.4 27-133.8 27-46.5 0-91.5-9.1-133.8-27A341.5 341.5 0 01279 755.2a342.16 342.16 0 01-73.7-109.4c-17.9-42.4-27-87.4-27-133.9s9.1-91.5 27-133.9c17.3-41 42.1-77.8 73.7-109.4 31.6-31.6 68.4-56.4 109.3-73.8 42.3-17.9 87.4-27 133.8-27 46.5 0 91.5 9.1 133.8 27a341.5 341.5 0 01109.3 73.8c9.9 9.9 19.2 20.4 27.8 31.4l-60.2 47a8 8 0 003 14.1l175.6 43c5 1.2 9.9-2.6 9.9-7.7l.8-180.9c-.1-6.6-7.8-10.3-13-6.2z"}}]},name:"reload",theme:"outlined"},Z=function(g,n){return p.createElement(M,S({},g,{ref:n,icon:Y}))},ee=p.forwardRef(Z);const se=({key:t,flash:g})=>{const{message:n}=T.useApp(),P=d(e=>{var o,s;return(s=(o=e.bookReducer.keys)==null?void 0:o[t])==null?void 0:s.isLoading}),x=d(e=>{var o,s;return(s=(o=e.bookReducer.keys)==null?void 0:o[t])==null?void 0:s.isFetch}),b=d(e=>{var o,s;return(s=(o=e.bookReducer.keys)==null?void 0:o[t])==null?void 0:s.error}),l=d(e=>{var o,s;return(s=(o=e.bookReducer.keys)==null?void 0:o[t])==null?void 0:s.filters.categoryIds}),c=d(e=>{var o,s;return(s=(o=e.bookReducer.keys)==null?void 0:o[t])==null?void 0:s.pagination}),i=d(e=>{var o,s;return(s=(o=e.bookReducer.keys)==null?void 0:o[t])==null?void 0:s.pages}),r=d(e=>{var o,s;return(s=(o=e.bookReducer.keys)==null?void 0:o[t])==null?void 0:s.pagination.page}),m=W(),u=(l||[]).toString(),h=k(r),C=k(u),j=p.useMemo(()=>{let e=[];const o=(c==null?void 0:c.page)||1;for(let s=0;s<o;s++){const A=(i==null?void 0:i[s+1])||[];e=[...e,...A]}return e},[i]),y=h!==r&&h!==void 0,v=C!==u&&C!==void 0,R=!(i!=null&&i[r]);p.useEffect(()=>{g==="refetch"?(n.success("Success"),f({key:t,categoryIds:l,page:r||1})):x?y&&R?f({key:t,categoryIds:l,page:r||1}):v&&r!==1?F(1):v&&r===1&&f({key:t,categoryIds:l,page:r}):f({key:t,categoryIds:l,page:r||1})},[t,r,u,g]);const f=async e=>await m(O(e)),w=p.useCallback(e=>{m(E({key:t,categoryIds:e}))},[t]),L=p.useCallback(e=>{m(H({key:t,page:e}))},[t]),F=p.useCallback(e=>{m($({key:t,page:e}))},[t]),I=j||[],N=(c==null?void 0:c.lastPage)||1;return{page:r,isLoading:P,isFetch:x,list:I,error:b,pagination:c,refetch:f,categoryIds:l||[],lastPage:N,setBookPage:L,setBookFilterCategory:w}},oe={currentPage:1,pageSize:12,total:0};function be(t){const g={...oe,...t},{title:n,categories:P,type:x,flash:b}=g;_();const{list:l,isLoading:c,lastPage:i,page:r,setBookPage:m,categoryIds:u,setBookFilterCategory:h}=se({key:x,flash:b.message}),C=()=>{m(r+1)},j=r>=i,y={title:`${n} - ${B.title}`,description:B.description,keywords:["Book","Manga","Novel","Comic","Oneshot"],author:"",canonical:route("books.manga")},v=[{key:1,title:"Home",href:route("home")},{key:2,title:n,isLast:!0}];return a.jsxs(z,{breadcrumbs:v,children:[a.jsx(J,{meta:y}),a.jsx("div",{className:"pt-4 pb-12",children:a.jsxs("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8",children:[a.jsx(q.Title,{level:3,children:n}),a.jsxs("div",{className:"flex flex-wrap lg:flex-nowrap flex-row-reverse gap-4",children:[a.jsx("div",{className:"flex flex-col flex-none lg:w-64 w-full",children:a.jsx(K,{children:a.jsx(G,{value:u,list:P,onChange:h})})}),a.jsx("div",{className:"flex flex-col flex-auto",children:a.jsxs(Q,{children:[a.jsx(U,{list:l}),j?null:a.jsx(V,{className:"my-4",justify:"center",gap:"small",children:a.jsx(D,{type:"primary",onClick:C,icon:a.jsx(ee,{}),loading:c,disabled:j,children:"Load More"})})]})})]}),a.jsx(X.BackTop,{})]})})]})}export{be as default};
